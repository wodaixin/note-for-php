### 减少HTTP请求次数



#### 为什么要减少HTTP请求

性能黄金法则：

只有10% - 20%的最终用户响应时间花在接收请求的HTML文档上，剩余的80% - 90%时间花在HTML文档所引用的所有组件（图片，script，css，flash等等）进行的HTTP请求上

如何改善：

改善响应时间的最简单途径就是减少组件的数量，并由此减少HTTP请求的数量



HTTP连接产生的开销：

域名解析--TCP连接--发送请求--等待--下载资源--解析时间



#### 减少HTTP请求的方式

1. 图片地图：

   图片地图允许你在一个图片上关联多个URL。目标URL的选择取决于用户单击图片上的那个位置

   图片地图：我们可以通过使用5个分开的图片，然后每个图片对应一个超链接。产生了5个HTTP请求，我们的目标是要减少HTTP请求。将5个图片合并为一张图片，然后以位置信息定位超链接。把HTTP请求减少为一个，可以保证设计的完整性和功能的齐全性

   使用 `<map><area></area></map>` 标签

2. CSS Sprites

   CSS Sprites 中文翻译为 CSS 精灵，通过合并图片，通过制定CSS的backgroud-image 和 backgroud-position 来显示元素。

   性能影响：

   图片地图与CSS精灵的响应时间基本上相同，但比使用各自独立图片的方式要快50%以上

3. 合并脚本和样式表

   使用外部的 js 和 css 文件引用的方式，因为这要比直接写在页面中性能要更好一点。

   独立的一个 js 要比用多个 js 文件组成的页面载入要快 38%
   
4. 图片使用 Base64 编码减少页面请求数
   
   采用 Base64 的编码方式将图片直接嵌入到网页中，而不是直接从外部载入
   
``` html
<img src = "data:image/gif;base64,/9j/.......">
```